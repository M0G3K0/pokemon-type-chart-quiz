<!-- 🛡️ GUARDRAIL -->

# 開発プロセスルール（プロセスの憲法）

## @what / @why / @failure

```
@what  開発プロセスにおけるツール使用とワークフローを規定
@why   一貫した開発プロセスにより、バグや手戻りを防ぐため
@failure  プロセス違反は手動レビューで検出、重大な場合はCIで検出
```

---

## 禁止事項

### PowerShellでのファイル編集

```
❌ 禁止コマンド
- Set-Content
- Add-Content  
- Out-File
- >> 演算子（リダイレクト）
```

**理由**: Windows PowerShellのデフォルトエンコーディングにより、日本語や絵文字が文字化けする。

**代替手段**: AIエージェントの専用ファイル編集ツールを使用。

---

## 優先ツール

### Git操作

| 操作 | 推奨 | 避ける |
|------|------|--------|
| PR作成 | `gh pr create --body-file` | 手動UI, `--body` 直接指定 |
| Issue作成 | `gh issue create --body-file` | 手動UI, `--body` 直接指定 |

**注意**: `--body` 引数で直接日本語や絵文字を渡すとWindows環境で文字化けするため、必ずファイル (`pr-body.md` 等) を経由すること。

### コミット粒度

一度のコミットで変更するファイル数は **30ファイル以下** を推奨する。

**理由**: 変更が大きすぎるとレビュワーの負担が増え、バグを見逃す原因になる。機能単位、リファクタリング単位で細かくコミットすること。
※ 初期導入時やライブラリアップデートなどの `chore` は例外とし得るが、警告が表示される。

| ブランチ確認 | `gh pr list` | `git branch -a` のみ |

### ファイル操作

| 操作 | 推奨 | 避ける |
|------|------|--------|
| ファイル作成 | AIツール | PowerShellリダイレクト |
| ファイル編集 | AIツール | `Set-Content` |

---

## ワークフロー参照

開発タスクを開始する際は、以下のワークフローを参照すること：

```
/development
```

これにより `.agent/workflows/development.md` が読み込まれ、
ブランチ作成、コミット、PR作成の手順が確認できる。

---

## 検証方法

### CI検証（自動）

- PRテンプレートの必須項目: `pr-validation.yml`
- ブランチ名規則: `pr-validation.yml`

### 手動検証

- コマンド使用ルールはコードレビュー時に確認

---

## 関連

- [AGENTS.md](../../AGENTS.md) - AIエージェント向けグローバル指示
- [CONTRIBUTING.md](../../CONTRIBUTING.md) - 開発規約詳細
- [開発ワークフロー](../../.agent/workflows/development.md)
